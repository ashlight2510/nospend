<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ë‚´ê°€ ì•ˆ ì‚° ê²ƒë“¤ì˜ ì´ìì‚° ğŸ’¸</title>

    <!-- SEO / OG -->
    <meta
      name="description"
      content="ì»¤í”¼Â·ìˆ Â·ë°°ë‹¬Â·íƒì‹œÂ·ì¶©ë™ì‡¼í•‘â€¦ ì•ˆ ìƒ€ìœ¼ë©´ ì–¼ë§ˆ ëª¨ì˜€ì„ê¹Œ? í•œ ë²ˆì— ê³„ì‚°!"
    />
    <meta property="og:title" content="ë‚´ê°€ ì•ˆ ì‚° ê²ƒë“¤ì˜ ì´ìì‚° ğŸ’¸" />
    <meta
      property="og:description"
      content="ì•ˆ ìƒ€ìœ¼ë©´ ëª¨ì˜€ì„ ëˆ, ë°”ë¡œ ê³„ì‚°í•´ì„œ ë°ˆìœ¼ë¡œ ê³µìœ !"
    />
    <meta property="og:type" content="website" />
    <meta
      property="og:image"
      content="https://dummyimage.com/1200x630/1f2937/f9fafb&text=Missed+Gains+Calculator"
    />
    <meta property="og:image:alt" content="Missed Gains Calculator" />
    <link rel="icon" href="favicon.svg" type="image/svg+xml" />
    <meta name="theme-color" content="#0f172a" />

    <script src="https://cdn.tailwindcss.com"></script>
    <style>
      :root {
        font-size: 17px;
      }
      @media (min-width: 640px) {
        :root {
          font-size: 16px;
        }
      }
      .glass {
        backdrop-filter: blur(10px);
        background: rgba(255, 255, 255, 0.7);
      }
    </style>
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1204894220949193"
     crossorigin="anonymous"></script>
    <!-- responsive-base -->
    <style>
      /* responsive-base */
      *, *::before, *::after {
        box-sizing: border-box;
      }
      html {
        -webkit-text-size-adjust: 100%;
      }
      img,
      video,
      canvas,
      svg {
        max-width: 100%;
        height: auto;
      }
      table {
        width: 100%;
      }
      pre,
      code {
        white-space: pre-wrap;
        word-break: break-word;
      }
    </style>
  <style>
    .adsense-block {
      margin: 16px 0;
      display: flex;
      justify-content: center;
    }
    .adsbygoogle {
      display: block;
      margin: 16px auto;
        text-align: center;
}
  </style>
</head>
  <body
    class="min-h-screen bg-gradient-to-b from-slate-950 via-slate-900 to-slate-950 text-slate-100"
  ><main class="max-w-3xl mx-auto px-4 py-10">
      <header class="mb-7">
        <div class="flex items-center justify-between gap-3">
          <div
            class="inline-flex items-center gap-2 px-3 py-1 rounded-full bg-white/10 border border-white/10 text-sm"
            data-i18n="badge"
          >
            ğŸ’¸ ë°ˆ ê³„ì‚°ê¸°
          </div>
          <div class="lang-switch" role="tablist" aria-label="Language switcher">
            <button type="button" data-lang="ko" class="active">í•œêµ­ì–´</button>
            <button type="button" data-lang="en">English</button>
          </div>
        </div>
        <h1
          class="mt-4 text-3xl sm:text-4xl font-extrabold tracking-tight"
          data-i18n="title"
        >
          ë‚´ê°€ ì•ˆ ì‚° ê²ƒë“¤ì˜ ì´ìì‚°
        </h1>
        <p class="mt-2 text-slate-300" data-i18n="subtitle">
          â€œê·¸ë•Œ ê·¸ê±°ë§Œ ì•ˆ ìƒ€ì–´ë„â€¦â€ë¥¼ ìˆ«ìë¡œ ë°”ê¿”ë“œë¦½ë‹ˆë‹¤.
        </p>
      </header>

      <section
        class="rounded-3xl border border-white/10 bg-white/5 p-5 sm:p-6 shadow-xl"
      >
        <div class="grid sm:grid-cols-2 gap-4">
          <div>
            <label class="text-sm text-slate-300" data-i18n="startYearLabel">
              ì‹œì‘ ì—°ë„
            </label>
            <input
              id="startYear"
              type="number"
              min="1990"
              max="2025"
              class="mt-2 w-full rounded-2xl bg-slate-900/60 border border-white/10 px-4 py-3 outline-none focus:ring-2 focus:ring-white/20"
            />
          </div>
          <div>
            <label class="text-sm text-slate-300" data-i18n="endYearLabel">
              ì¢…ë£Œ ì—°ë„ (ì˜¬í•´)
            </label>
            <input
              id="endYear"
              type="number"
              min="1990"
              max="2025"
              class="mt-2 w-full rounded-2xl bg-slate-900/60 border border-white/10 px-4 py-3 outline-none focus:ring-2 focus:ring-white/20"
            />
          </div>
        </div>

        <div class="mt-6 space-y-5">
          <div class="flex items-center justify-between">
            <h2 class="text-lg font-bold" data-i18n="monthlyTitle">
              ì›” í‰ê·  ì§€ì¶œ(ì•ˆ ìƒ€ë‹¤ë©´)
            </h2>
            <button
              id="resetBtn"
              class="text-sm px-3 py-1.5 rounded-xl bg-white/10 hover:bg-white/15 border border-white/10 transition"
              data-i18n="resetButton"
            >
              ì´ˆê¸°í™”
            </button>
          </div>

          <div id="items" class="space-y-4"></div>

          <div class="mt-6 flex flex-col sm:flex-row gap-3">
            <button
              id="calcBtn"
              class="flex-1 rounded-2xl bg-white text-slate-950 font-bold py-3 hover:opacity-90 transition"
              data-i18n="calcButton"
            >
              ê³„ì‚°í•˜ê¸°
            </button>
            <button
              id="randomBtn"
              class="flex-1 rounded-2xl bg-white/10 border border-white/10 font-semibold py-3 hover:bg-white/15 transition"
              data-i18n="randomButton"
            >
              ë°ˆ ì„¸íŒ…(ëœë¤)
            </button>
          </div>
        </div>
      </section>

      <section id="resultWrap" class="mt-6 hidden">
        <div
          class="rounded-3xl border border-white/10 bg-white/5 p-5 sm:p-6 shadow-xl"
        >
          <div class="flex items-start justify-between gap-3">
            <div>
              <p class="text-sm text-slate-300" data-i18n="resultLabel">
                ê²°ê³¼
              </p>
              <h3 class="mt-1 text-2xl font-extrabold">
                <span data-i18n="resultTitle">ğŸ’° ë‹¹ì‹ ì´ ì•ˆ ì‚° ì¸ìƒì˜ ì´ìì‚°</span>
              </h3>
            </div>
            <div class="text-right">
              <p class="text-xs text-slate-400" data-i18n="totalLabel">í•©ê³„</p>
              <p id="total" class="text-2xl font-extrabold"></p>
            </div>
          </div>

          <div id="breakdown" class="mt-4 grid sm:grid-cols-2 gap-3"></div>

          <div
            class="mt-5 rounded-2xl bg-slate-900/50 border border-white/10 p-4"
          >
            <p class="text-sm text-slate-300" data-i18n="memeLabel">
              ì˜¤ëŠ˜ì˜ ë°ˆ í•œ ì¤„
            </p>
            <p id="memeLine" class="mt-1 font-semibold"></p>
          </div>

          <div class="mt-5 flex flex-col sm:flex-row gap-3">
            <button
              id="shareBtn"
              class="flex-1 rounded-2xl bg-emerald-400 text-slate-950 font-bold py-3 hover:opacity-90 transition"
              data-i18n="shareButton"
            >
              ê³µìœ í•˜ê¸°(ëª¨ë°”ì¼)
            </button>
            <button
              id="copyBtn"
              class="flex-1 rounded-2xl bg-white/10 border border-white/10 font-semibold py-3 hover:bg-white/15 transition"
              data-i18n="copyButton"
            >
              ê²°ê³¼ í…ìŠ¤íŠ¸ ë³µì‚¬
            </button>
          </div>

          <div class="mt-6 border-t border-white/10 pt-5">
            <div class="flex items-center justify-between gap-3">
              <p class="text-sm text-slate-300" data-i18n="nextLabel">
                ë‹¤ìŒ ë°ˆìœ¼ë¡œ ë” ë•Œë¦¬ê¸°
              </p>
              <button
                id="toQuizBtn"
                class="text-sm px-3 py-1.5 rounded-xl bg-white/10 hover:bg-white/15 border border-white/10 transition"
                data-i18n="nextButton"
              >
                ğŸ’¸ ë¹„íŠ¸ì½”ì¸ ì•ˆ ì‚° ì£„ ê³„ì‚°ê¸° â†’
              </button>
            </div>
          </div>
        </div>
      </section>

      <footer class="mt-8 text-center text-xs text-slate-500" data-i18n="footer">
        made for funnyfunny / ashlight âœ¨
      </footer>
    </main>

    <style>
      .lang-switch {
        display: inline-flex;
        gap: 6px;
        padding: 4px;
        border-radius: 999px;
        background: rgba(255, 255, 255, 0.08);
        border: 1px solid rgba(255, 255, 255, 0.16);
      }
      .lang-switch button {
        border: none;
        background: transparent;
        color: rgba(255, 255, 255, 0.7);
        font-size: 12px;
        font-weight: 700;
        padding: 6px 12px;
        border-radius: 999px;
        cursor: pointer;
        letter-spacing: 0.08em;
      }
      .lang-switch button.active {
        background: #38bdf8;
        color: #0b1120;
      }
    </style>

    <script>
      const NOW_YEAR = 2025;
      const translations = {
        ko: {
          metaTitle: "ë‚´ê°€ ì•ˆ ì‚° ê²ƒë“¤ì˜ ì´ìì‚°",
          badge: "ğŸ’¸ ë°ˆ ê³„ì‚°ê¸°",
          title: "ë‚´ê°€ ì•ˆ ì‚° ê²ƒë“¤ì˜ ì´ìì‚°",
          subtitle: "â€œê·¸ë•Œ ê·¸ê±°ë§Œ ì•ˆ ìƒ€ì–´ë„â€¦â€ë¥¼ ìˆ«ìë¡œ ë°”ê¿”ë“œë¦½ë‹ˆë‹¤.",
          startYearLabel: "ì‹œì‘ ì—°ë„",
          endYearLabel: "ì¢…ë£Œ ì—°ë„ (ì˜¬í•´)",
          monthlyTitle: "ì›” í‰ê·  ì§€ì¶œ(ì•ˆ ìƒ€ë‹¤ë©´)",
          resetButton: "ì´ˆê¸°í™”",
          calcButton: "ê³„ì‚°í•˜ê¸°",
          randomButton: "ë°ˆ ì„¸íŒ…(ëœë¤)",
          resultLabel: "ê²°ê³¼",
          resultTitle: "ğŸ’° ë‹¹ì‹ ì´ ì•ˆ ì‚° ì¸ìƒì˜ ì´ìì‚°",
          totalLabel: "í•©ê³„",
          memeLabel: "ì˜¤ëŠ˜ì˜ ë°ˆ í•œ ì¤„",
          shareButton: "ê³µìœ í•˜ê¸°(ëª¨ë°”ì¼)",
          copyButton: "ê²°ê³¼ í…ìŠ¤íŠ¸ ë³µì‚¬",
          nextLabel: "ë‹¤ìŒ ë°ˆìœ¼ë¡œ ë” ë•Œë¦¬ê¸°",
          nextButton: "ğŸ’¸ ë¹„íŠ¸ì½”ì¸ ì•ˆ ì‚° ì£„ ê³„ì‚°ê¸° â†’",
          footer: "made for funnyfunny / ashlight âœ¨",
          monthLabel: "ì›”",
          breakdownFormula: "ì›” {monthly} Ã— 12 Ã— {years}ë…„",
          shareTitle: "ğŸ’¸ ë‚´ê°€ ì•ˆ ì‚° ê²ƒë“¤ì˜ ì´ìì‚°",
          sharePeriod: "ê¸°ê°„: {start}~{end} ({years}ë…„)",
          shareLine: "{label} ì•ˆ ìƒ€ìœ¼ë©´: +{amount}",
          shareTotal: "ğŸ’° ì´ìì‚°: {amount}",
          shareMeme: "ë°ˆ: {line}",
          copyToast: "ë³µì‚¬ë¨! (ë¶™ì—¬ë„£ê¸° í•˜ë©´ ë°”ë¡œ ê³µìœ  ê°€ëŠ¥)",
          copyPrompt: "ë³µì‚¬í•´ì„œ ê³µìœ í•´ì¤˜:",
          shareToast: "ê³µìœ ìš© í…ìŠ¤íŠ¸+ë§í¬ ë³µì‚¬ë¨!",
          items: [
            {
              key: "coffee",
              label: "â˜• ì»¤í”¼",
              hint: "ì˜ˆ: 6,000ì› x 20ì”",
              defaultMonthly: 80000,
            },
            {
              key: "alcohol",
              label: "ğŸº ìˆ ",
              hint: "ì˜ˆ: ì£¼ 1~2íšŒ",
              defaultMonthly: 160000,
            },
            {
              key: "delivery",
              label: "ğŸ” ë°°ë‹¬",
              hint: "ì˜ˆ: ì£¼ 2~4íšŒ",
              defaultMonthly: 140000,
            },
            {
              key: "taxi",
              label: "ğŸš• íƒì‹œ",
              hint: "ì˜ˆ: ìƒˆë²½ ê·€ê°€/ì´ë™",
              defaultMonthly: 90000,
            },
            {
              key: "shopping",
              label: "ğŸ›ï¸ ì¶©ë™ì‡¼í•‘",
              hint: "ì˜ˆ: â€˜í•„ìš”í•´ì„œ ìƒ€ë‹¤â€™",
              defaultMonthly: 120000,
            },
          ],
          memes: [
            "í–‰ë³µì€ ìƒ€ê³ , ìì‚°ì€ ì•ˆ ìƒ€ë‹¤.",
            "ê·¸ë•Œ ê·¸ê±° ë§ê³ â€¦ ì´ê±° ìƒ€ì–´ì•¼ í–ˆë„¤.",
            "ëˆì€ ì–´ë””ë¡œ ê°”ì„ê¹Œ? ë‚´ ê¸°ë¶„ ì¢‹ì€ ê¸°ì–µ ì†ìœ¼ë¡œ.",
            "ê·¸ë˜ë„ ê·¸ë•Œ ë§›ìˆì—ˆìœ¼ë©´ ëë‹¤â€¦ (ì•„ë§ˆë„)",
            "ì§€ì¶œì€ ì¶”ì–µì´ê³ , ì €ì¶•ì€ ì „ì„¤ì´ë‹¤.",
          ],
        },
        en: {
          metaTitle: "Missed Gains Total",
          badge: "ğŸ’¸ Meme Calculator",
          title: "Missed Gains Total",
          subtitle: "Turning â€œif I never bought thatâ€ into actual numbers.",
          startYearLabel: "Start year",
          endYearLabel: "End year (this year)",
          monthlyTitle: "Monthly spend (if you skipped it)",
          resetButton: "Reset",
          calcButton: "Calculate",
          randomButton: "Meme preset (random)",
          resultLabel: "Result",
          resultTitle: "ğŸ’° Your total missed gains",
          totalLabel: "Total",
          memeLabel: "Meme line of the day",
          shareButton: "Share (mobile)",
          copyButton: "Copy result text",
          nextLabel: "Hit me with the next meme",
          nextButton: "ğŸ’¸ Bitcoin I did not buy â†’",
          footer: "made for funnyfunny / ashlight âœ¨",
          monthLabel: "Month",
          breakdownFormula: "{monthly} per month Ã— 12 Ã— {years} years",
          shareTitle: "ğŸ’¸ Missed gains total",
          sharePeriod: "Period: {start}â€“{end} ({years} years)",
          shareLine: "Skipped {label}: +{amount}",
          shareTotal: "ğŸ’° Total: {amount}",
          shareMeme: "Meme: {line}",
          copyToast: "Copied! Paste to share.",
          copyPrompt: "Copy to share:",
          shareToast: "Share text + link copied!",
          items: [
            {
              key: "coffee",
              label: "â˜• Coffee",
              hint: "e.g., 6,000 KRW Ã— 20 cups",
              defaultMonthly: 80000,
            },
            {
              key: "alcohol",
              label: "ğŸº Drinks",
              hint: "e.g., 1â€“2 times per week",
              defaultMonthly: 160000,
            },
            {
              key: "delivery",
              label: "ğŸ” Delivery",
              hint: "e.g., 2â€“4 times per week",
              defaultMonthly: 140000,
            },
            {
              key: "taxi",
              label: "ğŸš• Taxi",
              hint: "e.g., late-night rides",
              defaultMonthly: 90000,
            },
            {
              key: "shopping",
              label: "ğŸ›ï¸ Impulse buys",
              hint: "e.g., â€œI needed itâ€",
              defaultMonthly: 120000,
            },
          ],
          memes: [
            "I bought happiness, not assets.",
            "Should have bought that instead of this.",
            "Where did the money go? Into my good memories.",
            "At least it was tasty back thenâ€¦ probably.",
            "Spending is memories; saving is legend.",
          ],
        },
      };

      const defaultLang = "en";
      const supportedLangs = ["ko", "en"];
      let currentLang = defaultLang;

      function getPack() {
        return translations[currentLang] || translations.ko;
      }

      function t(key, vars = {}) {
        const pack = getPack();
        const template = pack[key] ?? translations.ko[key] ?? key;
        if (typeof template !== "string") return template;
        return template.replace(/\{(\w+)\}/g, (_, token) =>
          vars[token] !== undefined ? vars[token] : `{${token}}`
        );
      }

      const $items = document.getElementById("items");
      const $startYear = document.getElementById("startYear");
      const $endYear = document.getElementById("endYear");
      const $resultWrap = document.getElementById("resultWrap");
      const $total = document.getElementById("total");
      const $breakdown = document.getElementById("breakdown");
      const $memeLine = document.getElementById("memeLine");

      function fmtKRW(n) {
        const v = Math.max(0, Math.floor(n || 0));
        const formatted = v.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");
        return currentLang === "en" ? `${formatted} KRW` : `${formatted}ì›`;
      }

      function clamp(n, a, b) {
        return Math.max(a, Math.min(b, n));
      }

      function loadState() {
        try {
          const raw = localStorage.getItem("nospend_state");
          return raw ? JSON.parse(raw) : null;
        } catch {
          return null;
        }
      }

      function saveState(state) {
        try {
          localStorage.setItem("nospend_state", JSON.stringify(state));
        } catch {}
      }

      function buildItems(values = {}) {
        $items.innerHTML = "";
        const ITEMS = getPack().items;
        for (const it of ITEMS) {
          const value = Number(values[it.key] ?? it.defaultMonthly);
          const row = document.createElement("div");
          row.className =
            "rounded-2xl border border-white/10 bg-slate-900/40 p-4";

          row.innerHTML = `
          <div class="flex items-center justify-between gap-3">
            <div>
              <div class="font-bold">${it.label}</div>
              <div class="text-xs text-slate-400 mt-0.5">${it.hint}</div>
            </div>
          <div class="text-right">
              <div class="text-xs text-slate-400">${t("monthLabel")}</div>
              <div class="font-extrabold" data-val="${it.key}">${fmtKRW(
            value
          )}</div>
            </div>
          </div>
          <input data-range="${
            it.key
          }" type="range" min="0" max="600000" step="10000"
                 class="mt-3 w-full" value="${value}">
        `;
          $items.appendChild(row);
        }

        $items.querySelectorAll("input[data-range]").forEach((inp) => {
          inp.addEventListener("input", () => {
            const key = inp.getAttribute("data-range");
            const val = Number(inp.value);
            const out = $items.querySelector(`[data-val="${key}"]`);
            if (out) out.textContent = fmtKRW(val);
            persist();
          });
        });
      }

      function getValues() {
        const values = {};
        $items.querySelectorAll("input[data-range]").forEach((inp) => {
          values[inp.getAttribute("data-range")] = Number(inp.value);
        });
        return values;
      }

      function persist() {
        const state = {
          startYear: Number($startYear.value),
          endYear: Number($endYear.value),
          values: getValues(),
        };
        saveState(state);
      }

      function yearsBetween(startY, endY) {
        const s = clamp(Number(startY), 1990, NOW_YEAR);
        const e = clamp(Number(endY), 1990, NOW_YEAR);
        const years = Math.max(0, e - s + 1);
        return { s, e, years };
      }

      function calc() {
        const { s, e, years } = yearsBetween($startYear.value, $endYear.value);
        $startYear.value = s;
        $endYear.value = e;

        const values = getValues();
        const breakdown = [];
        let sum = 0;

        const ITEMS = getPack().items;
        for (const it of ITEMS) {
          const monthly = Number(values[it.key] || 0);
          const total = monthly * 12 * years;
          sum += total;
          breakdown.push({ label: it.label, total, monthly });
        }

        // render
        $total.textContent = fmtKRW(sum);
        $breakdown.innerHTML = breakdown
          .map(
            (b) => `
        <div class="rounded-2xl bg-slate-900/40 border border-white/10 p-4">
          <div class="flex items-center justify-between">
            <div class="font-bold">${b.label}</div>
            <div class="font-extrabold">${fmtKRW(b.total)}</div>
          </div>
          <div class="mt-2 text-xs text-slate-400">${t("breakdownFormula", {
            monthly: fmtKRW(b.monthly),
            years,
          })}</div>
        </div>
      `
          )
          .join("");

        const memes = getPack().memes;
        $memeLine.textContent = memes[Math.floor(Math.random() * memes.length)];

        $resultWrap.classList.remove("hidden");
        persist();

        // scroll to result
        setTimeout(
          () =>
            $resultWrap.scrollIntoView({ behavior: "smooth", block: "start" }),
          60
        );

        return { s, e, years, sum, breakdown };
      }

      function buildShareText(payload) {
        const top3 = [...payload.breakdown]
          .sort((a, b) => b.total - a.total)
          .slice(0, 3);

        const lines = [
          getPack().shareTitle,
          t("sharePeriod", {
            start: payload.s,
            end: payload.e,
            years: payload.years,
          }),
          "",
          ...top3.map((x) =>
            t("shareLine", { label: x.label, amount: fmtKRW(x.total) })
          ),
          "",
          t("shareTotal", { amount: fmtKRW(payload.sum) }),
          t("shareMeme", { line: $memeLine.textContent }),
        ];
        return lines.join("\n");
      }

      // init
      (function init() {
        const saved = loadState();
        $startYear.value = saved?.startYear ?? 2018;
        $endYear.value = saved?.endYear ?? NOW_YEAR;

        buildItems(saved?.values ?? {});
        $startYear.addEventListener("input", persist);
        $endYear.addEventListener("input", persist);

        document.getElementById("calcBtn").addEventListener("click", calc);

        document.getElementById("resetBtn").addEventListener("click", () => {
          $startYear.value = 2018;
          $endYear.value = NOW_YEAR;
          buildItems({});
          $resultWrap.classList.add("hidden");
          persist();
        });

        document.getElementById("randomBtn").addEventListener("click", () => {
          const rnd = {};
          for (const it of ITEMS) {
            // 0~400k ì‚¬ì´, ì•½ê°„ í˜„ì‹¤ì ìœ¼ë¡œ
            const v = Math.round((Math.random() * 400000) / 10000) * 10000;
            rnd[it.key] = v;
          }
          buildItems(rnd);
          $resultWrap.classList.add("hidden");
          persist();
        });

        document
          .getElementById("copyBtn")
          .addEventListener("click", async () => {
            const payload = calc();
            const text = buildShareText(payload);
            try {
              await navigator.clipboard.writeText(text);
              alert(getPack().copyToast);
            } catch {
              prompt(getPack().copyPrompt, text);
            }
          });

        document
          .getElementById("shareBtn")
          .addEventListener("click", async () => {
            const payload = calc();
            const text = buildShareText(payload);
            const url = location.href;
            if (navigator.share) {
              try {
              await navigator.share({
                  title: getPack().title,
                  text,
                  url,
                });
                return;
              } catch {}
            }
            try {
              await navigator.clipboard.writeText(text + "\n\n" + url);
              alert(getPack().shareToast);
            } catch {
              prompt(getPack().copyPrompt, text + "\n\n" + url);
            }
          });

        // ì™¸ë¶€ ë§í¬ ë²„íŠ¼
        document.getElementById("toQuizBtn").addEventListener("click", () => {
          location.href = "https://bit.funnyfunny.cloud/";
        });

        applyTranslations();
      })();

      function applyTranslations() {
        document.title = t("metaTitle");
        document.querySelectorAll("[data-i18n]").forEach((el) => {
          el.textContent = t(el.dataset.i18n);
        });
      }

      function setLang(lang, options = {}) {
        const nextLang = translations[lang] ? lang : defaultLang;
        currentLang = nextLang;
        document.documentElement.lang = nextLang;
        localStorage.setItem("preferredLang", nextLang);
        document.querySelectorAll(".lang-switch button").forEach((button) => {
          button.classList.toggle("active", button.dataset.lang === nextLang);
        });
        applyTranslations();
        const saved = loadState();
        buildItems(saved?.values ?? {});
        if (!$resultWrap.classList.contains("hidden")) {
          calc();
        }
        if (options.updateUrl) {
          const url = new URL(window.location.href);
          url.searchParams.set("lang", nextLang);
          window.history.replaceState({}, "", url);
        }
      }

      function getRegionPreferredLang(fallback = defaultLang) {
        const intlLocale =
          typeof Intl === "object" && typeof Intl.DateTimeFormat === "function"
            ? Intl.DateTimeFormat().resolvedOptions().locale
            : "";
        const sources = [
          ...(navigator.languages || []),
          navigator.language,
          navigator.userLanguage,
          intlLocale,
        ]
          .filter(Boolean)
          .map((locale) => locale.toLowerCase());
        const hasKorean = sources.some((locale) => locale.startsWith("ko"));
        return hasKorean ? "ko" : fallback;
      }

      function detectLang() {
        const params = new URLSearchParams(window.location.search);
        const paramLang = params.get("lang");
        if (supportedLangs.includes(paramLang)) return paramLang;
        const stored = localStorage.getItem("preferredLang");
        if (supportedLangs.includes(stored)) return stored;
        const candidate = getRegionPreferredLang(defaultLang);
        return supportedLangs.includes(candidate) ? candidate : defaultLang;
      }

      document.querySelectorAll(".lang-switch button").forEach((button) => {
        button.addEventListener("click", () => {
          setLang(button.dataset.lang, { updateUrl: true });
        });
      });

      setLang(detectLang(), { updateUrl: false });
    </script>
  
<ins class="adsbygoogle"
     style="display:block; text-align:center"
     data-ad-format="fluid"
     data-ad-layout-key="-6t+ed+2i-1n-4w"
     data-ad-client="ca-pub-1204894220949193"
     data-ad-slot="7300458753"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
    
</body>
</html>
